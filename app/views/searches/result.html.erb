<div class="m-4">
  <div class="flex text-2xl border-b border-gray-200 m-4">
    <p class="mx-2">Search result for</p>
    <p class="result_search"><%= @params_search %></p>
  </div>
    <%#= 左邊的篩選器 %>
  <div class="flex m-4">
    <div class="hidden sm:block m-6">
      <button class="flex items-center bg-orange-500 text-white py-1 px-2 w-full rounded all_btn">
        <i class="fas fa-search"></i>
        <p class="mx-4">Everything</p>
      </button>
      <button class="flex items-center w-full track_btn">
        <i class="fab fa-soundcloud"></i>
        <p class="mx-4 my-1">Trackd</p>
      </button>
      <button class="flex items-center w-full user_btn">
        <i class="fas fa-user-friends"></i>
        <p class="mx-4 my-1">People</p>
      </button>
      <div class="flex items-center">
        <i class="fas fa-book"></i>
        <button class="mx-4 my-1">Albums</button>
      </div>
      <div class="flex items-center">
        <i class="fas fa-book"></i>
        <button class="mx-4 my-1">Playlists</button>
      </div>
      <div class="flex">
        <div class="my-3 text-xs table-row-group border-t border-gray-300 py-2">
          <div class="text-gray-500">
            <span class="hover:text-black"><a href="#">Legal</a></span>
            <span class="hover:text-black"><a href="#">Privacy</a></span>
            <span class="hover:text-black"><a href="#">Cookies</a></span>
            <span class="hover:text-black"><a href="#">Imprint</a></span>
            <span class="hover:text-black"><a href="#">Creator Resources</a></span>
            <span class="hover:text-black"><a href="#">Blog</a></span>
            <span class="hover:text-black"><a href="#">Charts</a></span>
            <span class="hover:text-black"><a href="#">Popular Search</a></span>
          </div>
            <div class="flex mt-2 mb-20">
              <button class="text-blue-500 hover:text-black pr-2">Language:</button>
                English (US)
            </div>
        </div>
      </div>
    </div>

    <%#= 右邊的搜尋結果 %>
    <div class="">
      <div class="flex text-sm text-gray-400 my-4">
        Found 
        <button class="">
          搜尋到的結果數量+ 
          tracks,
        </button>
        <button class="">
          搜尋到的結果數量+ 
          playlists,
        </button>
        <button class="">
          搜尋到的結果數量+ 
          people
        </button>      
      </div>

      <% if @users  %>
        <% @users.each do|user|%>
          <div class="flex user_template">
            <% if user.avatar_url %>
              <%= image_tag user.avatar_url, class: 'w-1/5 rounded-full' %>
            <% end %>
            <div class="w-4/5 flex-col items-end">
              <p class="text-black"><%= user.display_name%></p> 
              <div class="flex justify-between text-xs">
                <div>
                  <i class="fas fa-user-friends"></i>
                    <span class="user_follower_count">
                      <%= user.followers.count %>
                    </span>
                  <i class="fab fa-soundcloud"></i>
                    <span>
                      <%= user.songs.count %>
                    </span>
                </div>
                <button class="flex items-center border border-gray-400 rounded px-2 text-black follow_btn" result-follow-id='<%= user.id %>'>
                  <% if current_user.follows?(user)%>
                    <i class="fas fa-user-check" style="color: orange"></i>
                    <p class>Following</p> 
                  <% else %>
                    <i class="fas fa-user-check" ></i>
                    <p class>Follow+</p> 
                  <% end %>
                </button>
              </div>
            </div>
          </div>
        <% end %>
      <% end %>
        
      <% if @songs %>
        <% @songs.each do|song|%>
          <div class="flex mb-6 track_template">
            <div class="sm:w-1/6 w-1/4">
              <%#= 搜尋結果的Song圖片 %>
              <%= link_to image_tag(song.image_url), song_path(song.id) %>
            </div>
            <div class="sm:w-5/6 w-3/4 mx-4">
              <div class="flex items-center text-sm text-gray-500">
                <button class="text-orange-500 mr-2">
                  <i class="fas fa-play fa-2x"></i>
                </button>
                <div class="flex-col w-9/12">
                <%#= 歌曲名稱 %>
                  <p><%= song.name %></p>
                  <p class=""><%= link_to song.name, song_path(song.id) %></p>
                </div>
                <div class="w-2/12 flex">
                <%#= 歌曲TAG名稱 %>              
                  <% song.tags.each do |tag|%>
                    <div class="text-white bg-gray-400 rounded-full text-center"><%= tag.name %></div>
                  <% end %> 
                </div>
              </div>
              <%#=超難的音波專區%>
              <div class="">
                <%= content_tag(:div, '', class:['w-100 waveform-wrap'], data:{ path: song.track_url, filename: song.get_filename, id: song.id}) do %> 
                  <div class="waveform-dummy-trigger"></div>
                  <%= content_tag(:div, '', class:['waveform-dummy song-waveform']) %>
                <% end %>
              </div>
              <%#=留言專區%>
              <%# <div class="flex my-2">
                <img class="w-8" src="https://i1.sndcdn.com/artworks-5AGGrdLB22OugKjV-yK2AgQ-t500x500.jpg" alt="">
                <input class="w-full mx-2" type="text" placeholder="Write a comment">
              </div> %>
              <%#=歌曲功能專區、按讚、重播%>
              <div class="flex text-sm">
                <div class="flex w-2/3 my-2 justify-start">
                  <button class="flex border border-gray-300 px-3 mx-1 rounded like_btn" result-like-id='<%= song.id %>' >
                    <% if song.favorited_by?(current_user) %>
                      <i class="fas fa-heart" style="color: orange"></i>
                    <% else %>
                      <i class="far fa-heart"></i>
                    <% end %>
                    <p class="hidden md:block like_count"><%= song.liked_users.count %></p> 
                  </button>
                  <button class="flex border border-gray-300 px-3 mx-1 rounded">
                    <i class="fas fa-redo-alt"></i>
                    <p class="hidden md:block">3,300</p>
                  </button>
                  <button class="flex border border-gray-300 px-3 mx-1 rounded">
                    <i class="fas fa-share"></i>
                    <p class="hidden md:block">Share</p> 
                  </button>
                  <button class="flex border border-gray-300 px-3 mx-1 rounded">
                    <i class="fas fa-ellipsis-h"></i>
                    <p class="hidden md:block">More</p>
                  </button>
                </div>
                <div class="flex w-1/3 justify-end">
                  <button class="flex mx-2">
                    <i class="fas fa-play"></i>
                    <p class="hidden md:block">31.5M</p>
                  </button>
                  <%= link_to song_path(song.id), class:'flex mx-2' do %>
                    <i class="fas fa-comments"></i>
                    <p class="hidden md:block song_comments"><%= song.comments.count%></p>
                  <% end %>
                </div>
              </div>
            </div>
          </div>
        <% end %>
      <% end %>

      <% if @playlists %>
        <% @playlists.each do |playlist|%>
          <div class="flex justify-aroundp-3 p-5 bg-gradient-to-r from-gray-500 via-white to-pink-300"> <%#=專輯內圖、取名、hover愛心、播放%>
            <%= image_tag 'filename' %>
            <div class="w-1/4 bg-cover" style="background-image: url(https://i1.sndcdn.com/artworks-LPiPCego5LCeQz9V-0Vg0sg-t500x500.jpg)"></div>
            <div class="w-3/4 overflow-auto h-48"> <%#=曲名區域%>
              <div class="flex justify-around hover:bg-gray-100 border-b border-gray-100 mx-2">
                <div class="w-9/12 m-2 text-base text-gray-500">Tipsy Records — Toniia & Geena Fontanella - Psychic</div>
                <div class="w-3/12 m-2 text-base text-gray-500 text-right">375K</div>
              </div>
            </div>
          </div>
        <% end %>
      <% end %>
    </div>
  </div>
</div>


<%# template for song%>


<template>
</template>
